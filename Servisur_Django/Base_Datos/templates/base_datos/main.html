{% extends "base_datos/base.html" %}
{% load static %}
{% block title %}Panel de trabajo - Servisur{% endblock %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/panel.css' %}">

<div class="container py-3">
  <h2 class="text-center mb-4 text-secondary animate-fade-in">Panel de trabajo - Servisur</h2>

  <!-- HERO (fondo oscuro más visible) -->
  <div class="hero rounded mb-4 p-3 d-flex align-items-center hero-dark">
    <div class="me-3" style="width:96px">
      <img src="{% static 'img/logo_servisur1.png' %}" alt="Servisur" class="img-fluid rounded" />
    </div>
    <div>
      <h4 class="mb-0 text-white">Panel Servisur — Operaciones</h4>
      <p class="mb-0 text-light small">Gestión de reparaciones y control de procesos internos.</p>
    </div>
    <div class="ms-auto d-none d-md-block">
      <!-- espacio para acciones futuras -->
    </div>
  </div>

  <!-- GRID INFORMATIVO: ISO y TICKET (lado a lado) -->
  <div class="row mb-4 g-3 align-items-stretch">
    <div class="col-md-6">
      <div class="info-card p-3 h-100 rounded shadow-sm">
        <div class="d-flex gap-3">
          <img src="{% static 'img/iso5.gif' %}" alt="ISO" class="info-img rounded">
          <div>
            <h6 class="mb-1">ISO 27001</h6>
            <p class="text-muted small mb-0">Resumen de políticas y pasos clave para el cumplimiento interno.</p>
            <p class="text-muted small mt-2 mb-0"><strong>Última actualización:</strong> 01/11/2025</p>
          </div>
        </div>
      </div>
    </div>

    <div class="col-md-6">
      <!-- TICKET INFORMATIVO: fecha, horario y usuario -->
      <div class="ticket-info p-3 h-100 rounded shadow-sm">
        <div class="d-flex align-items-center justify-content-between">
          <div>
            <small class="text-muted d-block">Fecha</small>
            <strong class="d-block">{{ fecha_hoy }}</strong>
            <small class="text-muted small">Punta Arenas</small>
          </div>

          <div class="text-center">
            <small class="text-muted d-block">Horario</small>
            <strong class="d-block">{{ horario_apertura }} — {{ horario_cierre }}</strong>
            <small class="text-muted small">Horario local de tienda</small>
          </div>

          <div class="text-end">
            <small class="text-muted d-block">Usuario</small>
            <strong class="fs-6">{{ usuario_activo }}</strong>
            <small class="text-muted small d-block">Sesión actual</small>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Botones funcionales (estas sí enlazan) -->
  <div class="row text-center g-4">
    <div class="col-md-4">
      <a href="{% url 'registrar_reparacion' %}" class="text-decoration-none">
        <div class="card h-100 shadow-sm action-card">
          <div class="card-body d-flex flex-column justify-content-center align-items-center">
            <i class="bi bi-tools fs-1 text-primary"></i>
            <h5 class="mt-3">Registrar Reparación</h5>
          </div>
        </div>
      </a>
    </div>

    <div class="col-md-4">
      <a href="{% url 'consultar_historial' %}" class="text-decoration-none">
        <div class="card h-100 shadow-sm action-card">
          <div class="card-body d-flex flex-column justify-content-center align-items-center">
            <i class="bi bi-clipboard-data fs-1 text-success"></i>
            <h5 class="mt-3">Gestionar Reparaciones</h5>
          </div>
        </div>
      </a>
    </div>

    <div class="col-md-4">
      <a href="{% url 'estado_reparacion' %}" class="text-decoration-none">
        <div class="card h-100 shadow-sm action-card">
          <div class="card-body d-flex flex-column justify-content-center align-items-center">
            <i class="bi bi-gear fs-1 text-warning"></i>
            <h5 class="mt-3">Estado Reparación</h5>
          </div>
        </div>
      </a>
    </div>

    <div class="col-md-6">
      <a href="{% url 'generar_documento' %}" class="text-decoration-none">
        <div class="card h-100 shadow-sm action-card mt-4">
          <div class="card-body d-flex flex-column justify-content-center align-items-center">
            <i class="bi bi-file-earmark-text fs-1 text-secondary"></i>
            <h5 class="mt-3">Generar Documento</h5>
          </div>
        </div>
      </a>
    </div>

    <div class="col-md-6">
      <a href="{% url 'generar_excel' %}" class="text-decoration-none">
        <div class="card h-100 shadow-sm action-card mt-4">
          <div class="card-body d-flex flex-column justify-content-center align-items-center">
            <i class="bi bi-file-earmark-excel fs-1 text-success"></i>
            <h5 class="mt-3">Generar Excel</h5>
          </div>
        </div>
      </a>
    </div>
  </div>
</div>

  <footer class="mt-auto text-center small text-muted">
    <hr />
    <p class="mb-1">
      Sistema Servisur &copy; {{ now|date:"Y" }} — Panel de administracion
    </p>
    <p class="mb-0">Desarrollado por el equipo técnico | Versión 1.0</p>
  </footer>

<script src="{% static 'js/panel.js' %}"></script>
{% endblock %}