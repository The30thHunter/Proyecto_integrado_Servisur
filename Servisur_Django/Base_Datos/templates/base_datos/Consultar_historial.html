{% load static %}
<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Historial de Reparaciones</title>
    <link rel="stylesheet" href="{% static 'css/historial.css' %}" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  </head>
  <body>
    <main class="container animate-fade-in">
      <h2 class="hero-dark">ðŸ“‹ Historial de Reparaciones</h2>

      <!-- ðŸ” Sector 1: bÃºsqueda por RUT o NÂ° Orden -->
      <section class="info-card animate-slide-up">
        <h3>Buscar por RUT o NÂ° de Orden</h3>
        <form method="get" class="filtro-form">
          <input type="text" name="rut" placeholder="RUT" />
          <input type="text" name="orden" placeholder="NÂ° Orden" />
          <button type="submit">Buscar</button>
        </form>
      </section>

      <!-- ðŸ“… Sector 2: bÃºsqueda por Fecha -->
      <section class="info-card animate-slide-up">
        <h3>Buscar por Fecha</h3>
        <form method="get" class="filtro-form">
          <input type="date" name="fecha" />
          <button type="submit">Buscar</button>
        </form>
      </section>

      <!-- ðŸ“Š Resultados -->
      <section class="ticket-info animate-fade-in" style="padding: 1rem">
        <table class="historial-table" style="width: 100%">
          <thead>
            <tr>
              <th>NÃºmero</th>
              <th>Apellido</th>
              <th>NÂ° Orden</th>
              <th>Fecha</th>
              <th>RUT</th>
              <th>Marca</th>
              <th>Equipo</th>
              <th>Estado</th>
            </tr>
          </thead>
          <tbody>
            {% for rep in reparaciones %}
            <tr>
              <td>{{ rep.nombre }}</td>
              <td>{{ rep.apellido }}</td>
              <td>{{ rep.numero_orden }}</td>
              <td>{{ rep.fecha_ingreso|date:"d/m/Y" }}</td>
              <td>{{ rep.rut }}</td>
              <td>{{ rep.marca }}</td>
              <td>{{ rep.equipo }}</td>
              <td>{{ rep.estado }}</td>
            </tr>
            {% empty %}
            <tr>
              <td colspan="8" class="text-muted">
                No hay reparaciones registradas.
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </section>
    </main>

    <script src="{% static 'js/historial.js' %}"></script>
  </body>
</html>
